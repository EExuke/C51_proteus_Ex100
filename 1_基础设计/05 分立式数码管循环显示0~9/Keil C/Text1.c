//-----------------------------------------------------------------
//  名称: 分立式数码管循环显示0~9
//-----------------------------------------------------------------
//  说明: 主程序中的循环语句反复将0-9的段码送P0口，形成数字0-9的
//		  循环显示.
//-----------------------------------------------------------------
#include <reg51.h>
#define INT8U	unsigned char
#define INT16U	unsigned int
//0~9的共阴数码管段码表
code INT8U SEG_CODE[] = { 0x3F,0x06,0x5B,0x4F,0x66,0x6D,0x7D,0x07,0x7F,0x6F};
//-----------------------------------------------------------------
// 延时函数
//-----------------------------------------------------------------
void delay_ms(INT16U x) 
{
	INT8U t; while(x--) for(t = 0; t < 120; t++);
}

//-----------------------------------------------------------------
// 主程序
//-----------------------------------------------------------------
void main()
{  
    INT8U i = 0;
    while(1)
    {
        P0 = SEG_CODE[i];       //发送段码；
        i = (i+1)%10;          //数字索引在0~9范围内；
        delay_ms(200);        //延时；
    }
}