//-----------------------------------------------------------------
//  名称: 交流电压检测系统仿真
//-----------------------------------------------------------------
//  说明: 本例运行时,0~222V的交流电压将显示在数码管上，调整外部“被测”
//		交流电压时，数码管将实时刷新显示当前交流电压。
//
//-----------------------------------------------------------------
#include <reg51.h>
#include <intrins.h>
#include <stdio.h>
#include <math.h>
#define INT8U	unsigned char
#define INT16U	unsigned int
#define INT32U  unsigned long
//-----------------------------------------------------------------
//595引脚定义
sbit SH_CP  = P1^5;	//移位时钟脉冲
sbit DS 	= P1^6;	//串行数据输入
sbit ST_CP 	= P1^7;	//输出锁存器控制脉冲
//A/D转换器LTC1864引脚定义
sbit SDO 	= P2^3;	//串行数据输出引脚
sbit SCK 	= P2^5;	//串行时钟引脚
sbit CONV 	= P2^7;	//转换控制引脚
INT16U	 Sample_Array[40];//40次电压采样
//-----------------------------------------------------------------
double AC_Volt,avg_AC_Volt,ui;
INT8U digit[4];
volatile INT8U i_Count = 0;
const INT8U SEG_CODE[] = //共阴数码管段码表,最后一位为黑屏的段码
{ 0xC0,0xF9,0xA4,0xB0,0x99,0x92,0x82,0xF8,0x80,0x90,0xFF};
//-----------------------------------------------------------------
// 串行输入子程序
//-----------------------------------------------------------------
void Serial_Input_595(INT8U dat)
{


}

//-----------------------------------------------------------------
// 并行输出子程序
//-----------------------------------------------------------------
void Parallel_Output_595()
{


}

//-----------------------------------------------------------------
// 读取LTC1864模数转换值(16位,2字节)
//-----------------------------------------------------------------
INT16U Read_ADC()
{


}

//-----------------------------------------------------------------
// 将4位整数分解位为4个数位
// 该函数仅使用加/减运算符,这比使用/与%分解的效率要高
//-----------------------------------------------------------------
void DEC_TO_4DIGIT(int x, INT8U d[])
{


}

//-----------------------------------------------------------------
// 交流电压检测
//-----------------------------------------------------------------
void get_AC_Voltage()
{


}

//-----------------------------------------------------------------
// 串行输出到595驱动数码管显示
//-----------------------------------------------------------------
void Output_To_595_Display()
{


}

//------------------------------------------------------------------
// 主程序
//------------------------------------------------------------------
void main() 
{ 


}

//-----------------------------------------------------------------
// T0溢出中断函数(读取一次A/D转换结果并保存到采样数组)
//-----------------------------------------------------------------
void T0_OVF_INT() interrupt 1
{


}