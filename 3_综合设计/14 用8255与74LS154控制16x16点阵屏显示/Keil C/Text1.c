//-----------------------------------------------------------------
//  名称: 用8255与74LS154设计的16×16点阵屏
//-----------------------------------------------------------------
//  说明: 本例用8255扩展接口,发送4片8×8点阵屏的行码,列码由4-16
//	      译码器控制,实现了16×16点阵屏的显示.
//
//-----------------------------------------------------------------
#include <reg51.h>
#include <intrins.h>
#include <absacc.h>
#define INT8U  unsigned char
#define INT16U unsigned int
#define XTAL_FRQ 24					//振荡器频率: 24MHz
//8255 PA,PB,PC端口及命令端口地址定义
#define PA	XBYTE[0x0000]  
#define PB	XBYTE[0x0001] 
#define PC	XBYTE[0x0002] 
#define COM	XBYTE[0x0003]
INT8U W_index = 0;					//取字符项索引变量
sbit EN_74LS154 = P3^0;				//74LS154译码器使能控制线
code INT8U dot_Matrix[][32]=		//待显示文字的点阵
{
/*--  文字:  上  --*/
{0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0xFF,0x60,0x60,0x60,0x60,0x60,0x60,0x00,0x00,
0x30,0x30,0x30,0x30,0x30,0x30,0x3F,0x3F,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x00},
/*--  文字:  海  --*/
{0x30,0x63,0x66,0x04,0x30,0xFC,0xFF,0x37,0x76,0xF6,0x36,0xF6,0xF6,0x06,0x00,0x00,
0x30,0x7E,0x0E,0x00,0x03,0x1F,0x1F,0x1B,0x1F,0x5F,0x7B,0x7F,0x3F,0x1B,0x03,0x00},
/*--  文字:  大  --*/
{0x00,0x30,0x30,0x30,0x30,0x30,0xFF,0xFF,0x30,0x30,0x30,0x30,0x30,0x30,0x00,0x00,
0x00,0x40,0x60,0x30,0x18,0x0E,0x07,0x03,0x06,0x0C,0x18,0x30,0x60,0x40,0x00,0x00},
/*--  文字:  众  --*/
{0x00,0x60,0x60,0x30,0xD8,0xCC,0x07,0x07,0x0C,0xD8,0xF0,0x20,0x60,0x60,0x00,0x00,
0x00,0x30,0x18,0x0C,0x07,0x0F,0x58,0x60,0x30,0x1F,0x0F,0x18,0x30,0x60,0x40,0x00},
/*--  文字:  汽  --*/
{0x00,0x22,0x66,0xCC,0x20,0xB8,0x9F,0xAF,0xAC,0xAC,0xAC,0xAC,0xAC,0x0C,0x00,0x00,
0x20,0x70,0x3C,0x06,0x00,0x01,0x01,0x01,0x01,0x01,0x01,0x3F,0x7F,0x60,0x30,0x00},
/*--  文字:  车  --*/
{0x00,0x0C,0x8C,0xEC,0xFC,0xBC,0x8F,0xEF,0xEC,0x8C,0x8C,0x8C,0x8C,0x0C,0x00,0x00,
0x00,0x18,0x19,0x19,0x19,0x19,0x19,0x7F,0x7F,0x19,0x19,0x19,0x19,0x18,0x00,0x00},
/*--  文字:  有  --*/
{0x00,0x0C,0x8C,0xCC,0xEC,0xFC,0x7F,0x6F,0x6C,0x6C,0x6C,0xEC,0xEC,0x0C,0x0C,0x00,
0x02,0x03,0x01,0x00,0x7F,0x7F,0x09,0x09,0x09,0x09,0x69,0x7F,0x3F,0x00,0x00,0x00},
/*--  文字:  限  --*/
{0x00,0xFE,0xFE,0x66,0xFE,0x9E,0x00,0xFE,0xFE,0xD6,0xD6,0xD6,0xFE,0xFE,0x00,0x00,
0x00,0x7F,0x7F,0x0C,0x0F,0x07,0x00,0x7F,0x7F,0x30,0x0F,0x1C,0x36,0x62,0x20,0x00},
/*--  文字:  公  --*/
{0x00,0x80,0xC0,0x70,0x1E,0x0E,0xC0,0xC0,0x00,0x0E,0x1E,0x30,0x60,0xC0,0x80,0x00,
0x00,0x01,0x30,0x38,0x3C,0x37,0x33,0x30,0x10,0x16,0x1E,0x38,0x30,0x00,0x00,0x00},
/*--  文字:  司  --*/
{0x00,0x30,0xB6,0xB6,0xB6,0xB6,0xB6,0xB6,0xB6,0xB6,0x36,0x06,0xFE,0xFE,0x00,0x00,
0x00,0x00,0x1F,0x1F,0x19,0x19,0x19,0x19,0x1F,0x1F,0x60,0x60,0x7F,0x3F,0x00,0x00}
};

//-----------------------------------------------------------------
// 延时函数
//-----------------------------------------------------------------
void delay_ms(INT16U x) { INT8U t; while(x--) for(t = 0; t < 120; t++);}
//-----------------------------------------------------------------
// 定时器0溢出中断函数,在主程序延时期间以2ms的间隔动态刷新显示每列数据
//-----------------------------------------------------------------
void  Led_Display_Control() interrupt 1 
{


}

//-----------------------------------------------------------------
// 主程序
//-----------------------------------------------------------------
void main( )
{


}