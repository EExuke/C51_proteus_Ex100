//-----------------------------------------------------------------
//  名称: 用75LS595与74LS154控制16x16点阵屏显示
//-----------------------------------------------------------------
//  说明: 本例综合使用了串入并出芯片75LS595,4-16译码器75LS154及
//		 反向放大器7406,在16x16点阵屏上实现了汉字滚动显示效果.
//
//-----------------------------------------------------------------
#include <reg51.h>
#include <intrins.h>
#define INT8U  unsigned char
#define INT16U unsigned int
#define XTAL_FRQ 24						//振荡器: 24MHz
sbit  DS 	= P0^5;						//595串行数据输入
sbit  SH_CP	= P0^6;						//595移位时钟
sbit  ST_CP	= P0^7;						//595输出锁存控制
sbit  EN_74LS154 = P2^5;				//74LS154译码器使能控制线
INT8U W_Index = 0;						//12个待显示项的索引变量
INT8U code dot_Matrix[][32]=			//待显示文字(项)的点阵数据
{	/*---------------80----------------*/
	{ 0xFF,0xFF,0x8F,0xF0,0x07,0xE0,0x77,0xEF,
	  0x77,0xEF,0x07,0xE0,0x8F,0xF0,0xFF,0xFF,
	  0xFF,0xFF,0x0F,0xF0,0x07,0xE0,0xF7,0xEF,
	  0xF7,0xEF,0x07,0xE0,0x0F,0xF0,0xFF,0xFF },
	/*---------------51----------------*/
	{ 0xFF,0xFF,0x07,0xF6,0x07,0xE6,0x77,0xEF,
	  0x77,0xEF,0x77,0xE0,0xF7,0xF0,0xFF,0xFF,
	  0xFF,0xFF,0xEF,0xFF,0xEF,0xFF,0x07,0xE0,
	  0x07,0xE0,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF },
	/*---------------单----------------*/
	{ 0xFF,0xFF,0xFF,0xE7,0x03,0xE4,0x03,0xE4,
	  0x92,0xE4,0x90,0xE4,0x91,0xE4,0x03,0x80,
	  0x03,0x80,0x91,0xE4,0x90,0xE4,0x92,0xE4,
	  0x03,0xE4,0x03,0xE4,0xFF,0xE7,0xFF,0xFF },
	/*---------------片----------------*/
	{ 0xFF,0xFF,0xFF,0x9F,0xFF,0xC7,0x01,0xE0,
	  0x01,0xF8,0xCF,0xFC,0xCF,0xFC,0xCF,0xFC,
	  0xCF,0xFC,0xC0,0xFC,0xC0,0x80,0xCF,0x80,
	  0xCF,0xFF,0xCF,0xFF,0xFF,0xFF,0xFF,0xFF },
	/*---------------机----------------*/
	{ 0xE7,0xF9,0x67,0xFC,0x00,0x80,0x00,0x80,
	  0x67,0xFE,0xE7,0xDC,0xFF,0x8F,0x01,0xC0,
	  0x01,0xF0,0xF9,0xFF,0xF9,0xFF,0x01,0xC0,
	  0x01,0x80,0xFF,0x9F,0xFF,0x8F,0xFF,0xFF },
	/*---------------Ｃ----------------*/
	{ 0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x1F,0xFC,
	  0xEF,0xFB,0xF7,0xF7,0xFB,0xEF,0xFB,0xEF,
	  0xFB,0xEF,0xFB,0xEF,0xF7,0xF7,0xE3,0xFB,
	  0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF },
	/*---------------语----------------*/
	{ 0x9F,0xFF,0x9D,0xFF,0x11,0x80,0x13,0xC0,
	  0xFF,0xE7,0x39,0xFF,0x29,0x81,0x09,0x81,
	  0x01,0xCD,0x21,0xCD,0x29,0xCD,0x09,0xCD,
	  0x09,0x81,0x39,0x81,0x3F,0xFF,0xFF,0xFF },
	/*---------------言----------------*/
	{ 0xF3,0xFF,0xF3,0xFF,0x53,0x81,0x53,0x81,
	  0x53,0xC9,0x53,0xC9,0x50,0xC9,0x50,0xC9,
	  0x53,0xC9,0x53,0xC9,0x53,0x81,0x53,0x81,
	  0xF3,0xFF,0xF3,0xFF,0xFF,0xFF,0xFF,0xFF },
	/*---------------程----------------*/
	{ 0x9B,0xF3,0x9B,0xF9,0x03,0x80,0x01,0x80,
	  0x99,0xFC,0x99,0xF9,0xFF,0x9F,0x41,0x92,
	  0x41,0x92,0x49,0x80,0x49,0x80,0x49,0x92,
	  0x41,0x92,0x41,0x92,0xFF,0x9F,0xFF,0xFF },
	/*---------------序----------------*/
	{ 0xFF,0x9F,0x01,0xC0,0x01,0xE0,0xF9,0xFF,
	  0xF9,0xFC,0xC9,0xFC,0xC9,0x9C,0x88,0x9C,
	  0x08,0x80,0x49,0xC0,0x09,0xFC,0x89,0xFC,
	  0xC9,0xF8,0xF9,0xF8,0xFF,0xFF,0xFF,0xFF },
	/*---------------设----------------*/
	{ 0x9F,0xFF,0x9F,0xFF,0x1C,0xC0,0x11,0xC0,
	  0xFB,0xE7,0x0F,0x97,0x00,0x9C,0x20,0xC8,
	  0x3C,0xC3,0x3C,0xE7,0x20,0xE1,0x00,0xC8,
	  0x0F,0x9E,0xCF,0x9F,0xCF,0xDF,0xFF,0xFF },
	/*---------------计----------------*/
	{ 0x9F,0xFF,0x9F,0xFF,0x19,0x80,0x13,0x80,
	  0xF7,0xCF,0x9F,0xE7,0x9F,0xFF,0x9F,0xFF,
	  0x9F,0xFF,0x01,0x80,0x01,0x80,0x9F,0xFF,
	  0x9F,0xFF,0x9F,0xFF,0x9F,0xFF,0xFF,0xFF }
};
//-----------------------------------------------------------------
// 延时函数(由于本例振荡器频率为24MHz,下面的延时并非以ms为单位)
//-----------------------------------------------------------------
void delay_ms(INT16U x) { INT8U t; while(x--) for(t = 0; t<120; t++);}
//-----------------------------------------------------------------
// 向595的串行输入引脚写入一字节
//-----------------------------------------------------------------
void Serial_Input_Pin( INT8U d )
{


}

//-----------------------------------------------------------------
// 定时器0溢出中断函数,在主程序延时期间以2ms的间隔刷新显示每列数据
//-----------------------------------------------------------------
void  T0_Led_Display_Control() interrupt 1 
{


}

//-----------------------------------------------------------------
// 主程序
//-----------------------------------------------------------------
void  main( )
{


} 