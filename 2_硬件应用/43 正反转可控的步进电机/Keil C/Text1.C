//-----------------------------------------------------------------
//	名称: 正反转可控的步进电机
//-----------------------------------------------------------------
//	说明: 本例运行时,按下K1时电机正转,按下K2时反转,
//		按下K3时停止.在进行相应操作时,对应LED将被点亮.
//				
//-----------------------------------------------------------------
#include <reg51.h>
#define INT8U	unsigned char
#define INT16U unsigned int
//本例四相步进电机工作于八拍方式
//正转励磁序列为A->AB->B->BC->C->CD->D->DA
INT8U code FFW[] = {0x01,0x03,0x02,0x06,0x04,0x0C,0x08,0x09};
//反转励磁序列为AD->D->CD->C->BC->B->AB->A
INT8U code REV[] = {0x09,0x08,0x0C,0x04,0x06,0x02,0x03,0x01};
sbit	K1 = P3^0;		//正转
sbit	K2 = P3^1;		//反转
sbit	K3 = P3^2;		//停止
//-----------------------------------------------------------------
// 延时函数
//-----------------------------------------------------------------
void delay_ms(INT16U x) 
{
	INT8U t; while(x--) for(t = 0; t < 120; t++);
}

//-----------------------------------------------------------------
// 正转		
//-----------------------------------------------------------------
void STEP_MOTOR_FFW(INT8U n)
{ 


}

//-----------------------------------------------------------------
// 反转		 
//-----------------------------------------------------------------
void STEP_MOTOR_REV(INT8U n)
{


} 
 
//-----------------------------------------------------------------
// 主程序
//-----------------------------------------------------------------
void main()
{ 


}