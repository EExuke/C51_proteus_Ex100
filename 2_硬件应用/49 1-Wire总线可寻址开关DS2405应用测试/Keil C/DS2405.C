//-----------------------------------------------------------------
//  名称: DS2405 1-Wire可寻址开关器件程序
//-----------------------------------------------------------------
#include <reg51.h>
#include <intrins.h>
#include <stdio.h>
#define INT8U  unsigned char
#define INT16U unsigned int
#include  "DS2405.h"
INT8U CRC8;			//循环冗余校验码
//64位光刻编码(ROMCODE,8字节)
char RomCodeString[] = {"0000000000000000"};
//-----------------------------------------------------------------
// 延时nus (本例振荡器频率为12MHz)
//-----------------------------------------------------------------
void delay_us(INT8U x) { x >>= 1; while (--x); }
//-----------------------------------------------------------------
// 复位DS2405(1:复位成功,0:复位失败) 
//----------------------------------------------------------------- 
INT8U DS_Reset()
{	 


}

//-----------------------------------------------------------------
// 向1-Wire总线写1位0/1
//-----------------------------------------------------------------
void Write_DQ_bit(INT8U b)
{	 


}

//-----------------------------------------------------------------
// 发送读时隙时序
//-----------------------------------------------------------------
void Read_Slot()
{	 


}

//-----------------------------------------------------------------
// 写一个字节(由低位到高位输出)
//-----------------------------------------------------------------
void DS_Write_Byte(INT8U A)
{


}

//-----------------------------------------------------------------
// DS2405 ROMCODE匹配
//-----------------------------------------------------------------
void DS_Match_ROM(INT8U sROMID[])
{


}

//-----------------------------------------------------------------
// 读一个字节(高位在前,低位在后)(读取单个器件ROM时使用)
//-----------------------------------------------------------------
//INT8U DS_Read_Byte()
//{	 
//	INT8U i,d = 0x00;
//	for (i = 0; i < 8; i++)
//	{	Read_Slot(); if (DQ == 1)  d |= (1<<i); delay_us(52);
//	}
//	return d;
//}

//-----------------------------------------------------------------
// 获取DS2405的ROMCODE(读取单个器件ROM时使用)
//-----------------------------------------------------------------
//void DS_Read_ROM(INT8U sROMID[])
//{
//	INT8U i;
//	DS_Reset();					//复位
//	DS_Write_Byte(READ_ROM);	//发送读ROMCODE命令
//	for(i = 8; i > 0; i--)		//获取64位ROMCODE(8字节)
//	{	sROMID[i - 1] = DS_Read_Byte();
//	}
//}